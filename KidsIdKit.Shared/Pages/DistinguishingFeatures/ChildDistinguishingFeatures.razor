@page "/childDistinguishingFeatures/{Id:int}"

@using System.Linq.Expressions;
@using System.ComponentModel.DataAnnotations;
@using System.Reflection;
@using Microsoft.AspNetCore.Components.QuickGrid;
@using KidsIdKit.Shared.Data;

@inject IDataAccess dal
@inject NavigationManager NavigationManager

@if (CurrentChild == null || Features == null)
{
    <h2>@PageTitle</h2>
    <p>Loading...</p>
}
else
{
    <h2>@CurrentChild.FullName</h2>
    <p></p>
    <h3>@PageTitle</h3>
    <p></p>

    <QuickGrid Items="@Features">
        <TemplateColumn Context="distinguishingFeature">
            <div class="content-card"
                 @onclick="@(() => NavigationManager.NavigateTo($"/Feature/{Id}/{distinguishingFeature.Id}"))"
                 style="cursor: pointer;">
                <p>@distinguishingFeature.Description</p>
                @if (!string.IsNullOrWhiteSpace(distinguishingFeature.Photo.ImageSource))
                {
                    <img src="@distinguishingFeature.Photo.ImageSource" />
                }
            </div>
        </TemplateColumn>

        <TemplateColumn Context="distinguishingFeature">
            <a href="/FeatureRemove/@Id/@distinguishingFeature.Id" style="text-decoration:none">
                <i class="fas fa-trash-alt"></i>
            </a>
        </TemplateColumn>
    </QuickGrid>

    <section>
        <button type="button"
                @onclick="@(() => NavigationManager.NavigateTo($"/Child/{Id}"))"
                title="Back"
                class="btn-back">
            <i class="fas fa-chevron-left" />
        </button>

        <button type="button"
                @onclick="@(() => NavigationManager.NavigateTo($"/Feature/{Id}/-1"))"
                title="Add distinguishing feature"
                class="btn-icon">
            <i class="fas fa-plus" />
        </button>
    </section>
}
