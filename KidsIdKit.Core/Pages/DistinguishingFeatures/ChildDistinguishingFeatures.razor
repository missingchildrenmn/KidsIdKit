@page "/childDistinguishingFeatures/{Id:int}"
@layout KidsIdKit.Core.SharedComponents.ProtectedLayout

@using Microsoft.AspNetCore.Components.QuickGrid;
@using KidsIdKit.Core.Data
@using KidsIdKit.Core.Services

@inject IFamilyStateService FamilyState
@inject NavigationManager NavigationManager

@if (CurrentChild == null || Features == null)
{
    <h2>@PageTitle</h2>
    <p>Loading...</p>
}
else
{
    <h2>@CurrentChild.FullName</h2>
    <p></p>
    <h3>@PageTitle</h3>

    <QuickGrid Items="@Features">
        <TemplateColumn Context="distinguishingFeature">
            <div class="content-card"
                 @onclick="@(() => NavigationManager.NavigateTo($"/Feature/{Id}/{distinguishingFeature.Id}"))"
                 style="cursor: pointer; display: flex; flex-direction: column;">

                <p>@distinguishingFeature.Description</p>

                @if (!string.IsNullOrWhiteSpace(distinguishingFeature.Photo.ImageSource))
                {
                    <img src="@distinguishingFeature.Photo.ImageSource" />
                }

                <div style="display: flex; justify-content: flex-end;">
                    <a href="/FeatureRemove/@Id/@distinguishingFeature.Id" style="text-decoration:none; margin-left:8px;">
                        <i class="fas fa-trash-alt"></i>
                    </a>
                </div>
            </div>
        </TemplateColumn>
    </QuickGrid>

    <section>
        <button type="button"
                @onclick="@(() => NavigationManager.NavigateTo($"/Child/{Id}"))"
                title="Back"
                class="btn-back">
            <i class="fas fa-chevron-left" />
        </button>

        <button type="button"
                @onclick="@(() => NavigationManager.NavigateTo($"/Feature/{Id}/-1"))"
                title="Add distinguishing feature"
                class="btn-icon">
            <i class="fas fa-plus" />
        </button>
    </section>
}
