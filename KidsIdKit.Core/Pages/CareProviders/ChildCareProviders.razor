@page "/childCareProviders/{id:int}"

@using KidsIdKit.Core.Data
@using KidsIdKit.Core.Services

@inject IFamilyStateService FamilyState
@inject NavigationManager NavigationManager

@if (CurrentChild == null || CareProviders == null)
{
    <h2>@PageTitle</h2>
    <p>Loading...</p>
}
else
{
    <h2>@CurrentChild.FullName</h2>
    <p></p>
    <h3>@PageTitle</h3>
    <p></p>

    @if (CareProviders != null && CareProviders.Count() > 0)
    {
        <table class="table table-striped" style="border: 1px solid black;margin-top:10px;">
            @* Move styles to an .scss file *@
            <thead style="background-color:lightblue;">
                <tr>
                    <th class="text-center">Clinic Name</th>
                    <th class="text-center">Name</th>
                    <th class="text-center">Family Name</th>
                    <th class="text-center">Role</th>
                    <th class="text-center">Phone</th>
                    <th class="text-center">Address</th>
                    <th class="text-center">Edit</th>
                    <th class="text-center">Delete</th>
                </tr>
            </thead>

            <tbody style="background-color:lightyellow;">
                @foreach (var person in CareProviders)
                {
                    <tr style='vertical-align:central'>
                        <td class="text-center">@person.ClinicName</td>
                        <td class="text-center">@person.GivenName</td>
                        <td class="text-center">@person.FamilyName</td>
                        <td class="text-center">@person.CareRoleDescription</td>
                        <td class="text-center">@person.PhoneNumber</td>
                        <td class="text-center">@person.Address</td>
                        <td class="text-center"><a href="/CareProvider/@id/@person.Id" style="text-decoration:none"><i class="fas fa-edit" /></a></td>
                        <td class="text-center"><a href="/CareProviderRemove/@id/@person.Id" style="text-decoration:none"><i class="fas fa-trash-alt" /></a></td>
                    </tr>
                }
            </tbody>
        </table>
    }

    <p></p>
    <div>
        <button type="button"
                @onclick="@(() => NavigationManager.NavigateTo($"/Child/{id}"))"
                title="Back"
                class="btn-back">
            <i class="fas fa-chevron-left" />
        </button>

        <button type="button"
                @onclick="@(() => NavigationManager.NavigateTo($"/CareProvider/{id}/-1"))"
                title="Add care provider"
                class="btn-icon">
            <i class="fas fa-plus" />
        </button>
    </div>
}
